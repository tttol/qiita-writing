---
title: 話題の粛清ソートアルゴリズム「スターリンソート」をPythonで実装した
tags:
  - Python
  - ネタ
  - スターリンソート
private: false
updated_at: '2019-08-02T14:29:54+09:00'
id: c9e5c74be3366df65bce
organization_url_name: null
slide: false
ignorePublish: false
---
# スターリンソートとは
<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ソートされていない要素を粛清することでO(N)でソートできるスターリンソートとかいうのを見て爆笑してる</p>&mdash; やんぎん (@4116You) <a href="https://twitter.com/4116You/status/1155619860027547648?ref_src=twsrc%5Etfw">July 28, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

今話題の計算量が $O(n)$ で済む驚異のソートアルゴリズム、スターリンソートをご存知でしょうか。

中身はいたってシンプルで、ソートされていない要素を削除（粛清）して、強引に昇順リストを生成します。
例えば、`[1, 2, 1, 1, 4, 3, 9]`というリストをスターリンソートすると`[1, 2, 4, 9]`になります。（1, 1, 3が粛清されました）

**粛清**というパワーワードがポイントですね。


既に先人達が色々な言語で実装しておりますが、知らない言語しかなかったのでこの度Pythonで実装してみました。

# 先駆者達
[計算量O(n)の画期的なソートアルゴリズムであるスターリンソートをHaskell で実装してみた #Haskell](https://qiita.com/Tatsuki-I/items/380d6bd06515b872b2b2)
[計算量O(n)で噂のスターリンソートを実装してみた](https://qiita.com/MeilCli/items/721526d716851e92192a)
[[Rust] スターリンソートと PartialOrd](https://qiita.com/osanshouo/items/1d4f56d93ee8ac8bdf55)
[rubyでスターリンソートをやってみた（ブロック渡しも可能）](https://qiita.com/haru_pad/items/1598690e1105f3e33389)
# Pythonで実装
コード

```python
data = [1, 2, 1, 1, 4, 3, 9]
purge = [] #purge : [動詞]〜を粛清する

# 粛清すべき要素のインデックスを探す
tmp = data[0] - 1
for i, e in enumerate(data):
    if e < tmp:
        purge.append(i)
    else:
        tmp = e

# Let's 粛清!!
for i, e in enumerate(purge):
    data.pop(e - i)

print(data)
```

標準出力

```terminal
[1, 2, 4, 9]
```

`1 1 3`が粛清され、見事に昇順ソートされましたね。
ルールに従わない要素は消す、なんとも強引なアルゴリズムです。

よいこのみなさんは他の正しいソートアルゴリズムを使いましょう。

# 追記
`pop()`は粛清感が出るけど計算量が $O(n)$ じゃなくなる、とのコメント多数頂いたので`pop()`を使わない実装を考えました。

```python
data = [1, 2, 1, 1, 4, 3, 9]
purged_data = [] #purge : [動詞]〜を粛清する
tmp = data[0] - 1

for i, e in enumerate(data):
    if tmp <= e:
        purged_data.append(e)
        tmp = e
print(purged_data)
```

```terminal
[1, 2, 4, 9]
```
粛清感が薄れますが、このほうがすっきりしますね。
計算量も減りますし。

（ていうか粛清感ってなんだよ）
