---
title: 【GAS】Font Awesome でくるくる回るローディングアイコンを実装する
tags:
  - HTML
  - JavaScript
  - GoogleAppsScript
  - FontAwesome
private: false
updated_at: '2019-03-10T18:10:05+09:00'
id: f96b0971859d480d4601
organization_url_name: null
slide: false
ignorePublish: false
---
# 目的
何らかの処理を行っている間だけローディングアイコンを出したい。

外部ライブラリを使ってもできるのですが、デザインがいまいちしっくり来なかったので、FontAwesomeのローディングアイコンをつかって実装しました。

# Fontawesomeとは
ウェブサイトでよく使いそうなアイコンを無料で提供してくれるサービスです。（有料プランもありますが今回は無料プランのアイコンを使います）

https://fontawesome.com


# 動作
![名称未設定.mov.gif](https://qiita-image-store.s3.amazonaws.com/0/159675/7af5fe4e-2602-feb2-6b79-7799b4ee244d.gif)

ボタンを押したら何らかの処理が走って、処理が終了するまでローディングアイコンがくるくる回ります。
# ソース

```html:HTML
 <!-- ボタン -->
　<button>ここを押すと何らかの処理が始まる</button>

 <!-- ローディングアイコン -->
  <div class="loading">
    <i class="fas fa-spinner fa-5x fa-spin"></i>
  </div>

```

```css:css
.loading {
  display: none; /* 通常時は非表示 */
  z-index: 1;
  position: fixed;
  top: 50%;
  left: 50%;
  color: gray;
}
```

```javascript:javascript
  $('button').on('click', function(){
    // ローディングアイコンを表示
    $('.loading').css('display', 'block');

    // doSomethingでなにか処理を実行し、処理が終わったらダイアログを出す
    google.script.run
    .withSuccessHandler(function(){
      $('.loading').css('display', 'none');
      alert('成功しました');
    })
    .doSomething();
  });
```

```javascript:GoogleAppsScript
  function doSomething(){
    // なにかする
    return true;
  }
```

# 解説
まずHTML側でローディングアイコンを用意しておきます。
classに`fa-spin`を指定することでアイコンがくるくる回ります。

```html
 <!-- ローディングアイコン -->
  <div class="loading">
    <i class="fas fa-spinner fa-5x fa-spin"></i>
  </div>
```

しかし、用意したアイコンはCSSから`display:none;`で非表示にしておき、ボタンが押されたタイミングで`display:block;`にし、画面上に表示させます。



ローディングアイコンを表示させたら、その後行いたい処理を`doSomething()`で実行、終わったらアイコンを`display:none;`で消して、ダイアログを表示します。

